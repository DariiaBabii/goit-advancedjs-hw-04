{"version":3,"file":"commonHelpers.js","sources":["../src/pixabay-api.js","../src/render-gallery.js","../src/main.js"],"sourcesContent":["// import axios from 'axios';\n\nconst URL = 'https://pixabay.com/api/';\nconst pageSize = 40;\n\nexport async function getImage(query, page) {\n  try {\n    const resp = await axios.get(URL, {\n      params: {\n        key: '44570519-7c0b61377156fc3d5e2c8fcbc',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page: pageSize,\n        page,\n      },\n    });\n    return resp;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","const gallery = document.querySelector('.gallery');\n\nexport function renderGallery(elements) {\n  const markup = elements\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n       <a href=\"${largeImageURL}\" class=\"card-link\">\n          <div class=\"photo-card\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" class=\"image\" />\n        <div class=\"info\">\n          <p class=\"info-item\"><b>Likes</b>${likes}</p>\n          <p class=\"info-item\"><b>Views</b>${views}</p>\n          <p class=\"info-item\"><b>Comments</b>${comments}</p>\n          <p class=\"info-item\"><b>Downloads</b>${downloads}</p>\n        </div>\n      </div>\n      </a>`;\n      }\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n}","import { getImage } from './pixabay-api.js';\nimport { renderGallery } from './render-gallery.js';\n\nconst searchForm = document.querySelector('.search-form');\nconst loadMore = document.querySelector('.load-more');\nconst gallery = document.querySelector('.gallery');\nconst searchInput = document.querySelector('input[name=\"searchQuery\"]');\nconst searchButton = document.querySelector('button[type=\"submit\"]');\n\nsearchForm.addEventListener('submit', onFormSubmit, false);\nsearchInput.addEventListener('input', onSearchInput, false);\nloadMore.addEventListener('click', onLoadMore);\n\nlet page = 1;\n\nconst lightbox = new SimpleLightbox('.gallery a', {});\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  page = 1;\n  gallery.innerHTML = '';\n  const query = searchInput.value;\n  loadMore.style.display = 'none';\n  try {\n    const response = await getImage(query, page);\n    const { hits, totalHits } = response.data;\n    if (hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again.',\n      });\n      return;\n    }\n    renderGallery(hits);\n    lightbox.refresh();\n    iziToast.success({\n      title: 'Success',\n      message: `Hooray! We found ${totalHits} images.`,\n    });\n    loadMore.style.display = 'block';\n    smoothScroll();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n    });\n    console.error(error);\n  }\n}\n\nasync function onLoadMore() {\n  page++;\n  const query = searchInput.value;\n  try {\n    const response = await getImage(query, page);\n    const { hits } = response.data;\n    renderGallery(hits);\n    lightbox.refresh();\n    if (hits.length < 40) {\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      loadMore.style.display = 'none';\n    }\n    smoothScroll();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load more images. Please try again later.',\n    });\n    console.error('Error in onLoadMore:', error);\n  }\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nfunction onSearchInput() {\n  searchButton.disabled = searchInput.value.trim() === '';\n}\n"],"names":["URL","pageSize","getImage","query","page","error","gallery","renderGallery","elements","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","loadMore","searchInput","searchButton","onFormSubmit","onSearchInput","onLoadMore","lightbox","event","response","hits","totalHits","smoothScroll","cardHeight"],"mappings":"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"}